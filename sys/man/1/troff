.TH TROFF 1
.SH NAME
troff, nroff, dpost \- text formatting and typesetting
.SH SYNOPSIS
.B troff
[
.I option ...
]
[
.I file ...
]
.PP
.B dpost
[
.B -f
] [
.I file ...
]
.PP
.B nroff
[
.I option ...
]
[
.I file ...
]
.SH DESCRIPTION
.I Troff
is Plan 9's powerful document formatting and typesetting system.
It transforms plain text files with embedded formatting commands
into beautifully typeset documents for printing or display.
.PP
.I Troff
reads your text files and produces a device-independent intermediate
format that describes exactly where each character should be placed,
what font and size to use, and how to handle graphics.
This intermediate output is then processed by device-specific programs:
.IP \(bu 3
.IR dpost
converts troff output to PostScript for modern printers
.IP \(bu
.IR proof (1)
displays formatted output on screen for previewing
.IP \(bu
.IR lp (1)
handles the printing pipeline
.PP
.I Nroff
is essentially the same program as troff, but optimized for
typewriter-like output devices such as terminals and simple printers.
On Plan 9, nroff is actually a shell script that calls troff with the
.B -N
option.
.PP
.B "Getting Started:"
The simplest way to use troff is:
.IP
.B "troff myfile.ms | lp"
.PP
This processes 
.B myfile.ms
(which should contain text with troff formatting commands)
and sends the result directly to your default printer.
.PP
.B "Basic Usage:"
If no
.I file
argument is present, troff reads from standard input.
Use a single minus
.RB ( - )
to explicitly read from standard input when mixing with other files.
.PP
.B "Common Options:"
.nr xx \w'\fL-m\f2name\ \ '
.TP \n(xxu
.BI -m name
Load macro package
.BI /sys/lib/tmac/tmac. name
before processing your files.
.br
Common packages: 
.B -ms
(manuscript macros), 
.B -mm 
(memo macros), 
.B -man
(manual page macros)
.br
Example: 
.B "troff -ms mydoc.ms"
.TP
.BI -T dest
Choose output device (default: 
.BR utf ):
.br
.B -Tutf
\- Unicode PostScript (recommended for modern printers)
.br
.B -Tpost 
\- Standard PostScript
.br
.B -T202
\- Mergenthaler Linotron 202 typesetter
.TP
.B -a
Preview mode: send readable text approximation to terminal
instead of typesetter codes. Useful for quick document review.
.br
Example: 
.B "troff -a mydoc.ms | less"
.TP
.BI -o list
Print only specific pages. Use commas and ranges:
.br
.B "-o 1,3,5-7"
prints pages 1, 3, and 5 through 7
.br 
.B "-o -3"
prints pages 1 through 3
.br
.B "-o 5-"
prints from page 5 to the end
.PP
.B "Advanced Options:"
.TP
.BI -n N
Start page numbering at
.IR N .
Useful when printing document sections separately.
.TP
.BI -r aN
Set number register
.I a
to value
.IR N .
Registers control document formatting variables.
.br
Example: 
.B "-r P1"
sets register P to 1 (useful for controlling page layout)
.TP
.B -i
Continue reading from standard input after processing all files.
Useful for interactive document building.
.TP
.B -q 
Enable simultaneous input-output mode for the
.B rd
request (advanced feature for interactive documents).
.TP
.B -N
Force typewriter output mode (same as calling nroff).
Use this for terminal or simple printer output.
.PP
.B "Font and Typography Options:"
.TP \n(xxu
.BI -F dir
Look for font files in directory
.I dir
instead of the standard location
.BR /sys/lib/troff/font .
Useful when using custom fonts or testing new font installations.
.PP
.B "Terminal Output Options (nroff mode):"
When using
.B -N
or calling
.IR nroff ,
these additional options are available:
.TP \n(xxu
.BI -s N
Pause every
.I N
pages (default 1) for paper changes or user interaction.
.TP
.BI -T name
Terminal type for nroff output:
.br
.B -Tutf
\- Plan 9 UTF-8 encoding (default)
.br
.B -T37
\- Teletype Model 37
.br  
.B -Tlp
\- Line printer (no half-line capability)
.br
.B -T450
\- DASI-450 (Diablo Hyterm)
.br
.B -Tthink
\- HP ThinkJet
.TP
.B -e
Produce evenly-spaced words in justified lines using full terminal resolution.
.TP
.B -h
Use tabs for horizontal spacing to reduce output size and increase speed.
Assumes tab stops every 8 character positions.
.SH EXAMPLES
.B "Simple Document Processing:"
.IP
Process a manuscript and send to printer:
.br
.B "troff -ms letter.ms | lp"
.PP
Preview a document on screen:
.br
.B "troff -ms -a report.ms | less"
.PP
Generate PostScript file:
.br
.B "troff -ms thesis.ms | dpost > thesis.ps"
.PP
.B "Working with Fonts:"
.IP
Use a specific font directory:
.br
.B "troff -F /usr/fonts -ms document.ms"
.PP
Process document with custom page numbering:
.br
.B "troff -ms -n 5 chapter2.ms | lp"
.PP
.B "Terminal Output:"
.IP
Format for terminal viewing:
.br
.B "nroff -ms memo.ms | less"
.PP
Format with specific terminal type:
.br
.B "nroff -Tlp -ms document.ms > document.txt"
.PP
.B "Batch Processing:"
.IP
Print specific pages only:
.br
.B "troff -ms -o 1,5-10 manual.ms | lp"
.PP
Process multiple chapters with continuous numbering:
.br
.B "troff -ms ch1.ms ch2.ms ch3.ms | lp"
.PP
.B "Advanced Usage:"
.IP
Set custom variables and process:
.br
.B "troff -ms -r P1 -r L66 document.ms"
.PP
Interactive document building:
.br
.B "troff -ms template.ms -i"
.br
(Then type additional troff commands interactively)
.SH FILES
.TF /sys/lib/troff/term/*
.TP
.B /tmp/trtmp*
temporary file
.TP
.B /sys/lib/tmac/tmac.*
standard macro files
.TP
.B /sys/lib/troff/term/*
terminal driving tables for
.I nroff
.TP
.B /sys/lib/troff/font/*
font width tables for
.I troff
.SH SOURCE
.B /sys/src/cmd/troff
.br
.B /rc/bin/dpost
.br
.ne 3
.SH "SEE ALSO"
.IR lp (1),
.IR proof (1),
.IR page (1),
.IR eqn (1),
.IR tbl (1),
.IR pic (1),
.IR grap (1),
.IR doctype (1),
.IR ms (6),
.IR image (6),
.IR tex (1),
.IR deroff (1),
.IR col (1)
.br
J. F. Ossanna and B. W. Kernighan,
``Troff User's Manual''
.br
B. W. Kernighan,
``A Typesetter-Independent TROFF'',
CSTR #97
.br
B. W. Kernighan,
``A TROFF Tutorial'',
.I
Unix Research System Programmer's Manual,
Tenth Edition, Volume 2.
